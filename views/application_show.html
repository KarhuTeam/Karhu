{{template "header"}}
  <div class="breadcrumb">
    <a href="/">All applications</a> &gt; {{ .application.Name }}
  </div>
</header>
<main>
  <div class="box">
    <a class="btn" href="/application/edit/{{ .application.Id.Hex }}">Edit</a>
    <a class="btn" href="/application/configuration/{{ .application.Id.Hex }}">Add configuration</a>
    <a class="btn btn-danger" data-text="Do you want to remove this application ?" href="/application/delete/{{ .application.Id.Hex }}">Delete</a>
  </div>
  <div class="box">
    <h2 class="box-title">{{ .application.Name }}<a class="right" href="/application/edit/{{ .application.Id.Hex }}">Edit</a></h2>
    <p class="box-text">{{ .application.Description }}</p>
    <p class="box-text">Tags : {{range $tag := .application.Tags}}<span class="label">{{$tag}}</span> {{else}} No tag {{end}}</p>
  </div>
  <div class="box-col">
    <div class="box">
      <h2 class="box-title">Deployments</h2>
      <ul class="box-list">
        {{ range $deployment := .deployments }}
          <li>
              <span class="state state-{{$deployment.Status}}"></span>
              Deploy <a href="/application/deployment/{{$.application.Name}}/{{$deployment.Id.Hex}}">#{{$deployment.Id.Hex}}</a>
              <span class="right">
                  <form action="/application/deployment/{{ $.application.Name }}/{{$deployment.BuildId.Hex}}" method="POST">
                      <button class="btn btn-small btn-danger" data-text="Are you sure ?" type="submit">Redeploy</button>
                  </form>
              </span></li>
        {{ end }}
      </ul>
    </div>
    <div class="box">
      <h2 class="box-title">Builds</h2>
      <ul class="box-list">
          {{ range $build := .builds }}
            <li>Build #{{$build.Id.Hex}}
                <span class="right">
                    <form action="/application/deployment/{{ $.application.Name }}/{{$build.Id.Hex}}" method="POST">
                        <button class="btn btn-small btn-danger" data-text="Are you sure ?" type="submit">Deploy</button>
                    </form>
                </span></li>
          {{ end }}
      </ul>
    </div>
    <div class="box">
      <h2 class="box-title">Configs</h2>
      <ul class="box-list">
          {{ range $config := .configs }}
            <li>
                {{ if $config.Enabled }}
                    <span class="state state-done"></span>
                {{ else }}
                    <span class="state state-running"></span>
                {{ end }}
                Config {{$config.Path}}
                <span class="right">
                    <a href="/application/config/{{ $.application.Name }}/{{ $config.Id.Hex }}">Edit</a>
                </span>
            </li>
          {{ end }}
      </ul>
    </div>
  </div>
</main>
{{template "footer"}}
